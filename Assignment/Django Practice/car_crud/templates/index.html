{% extends 'base.html' %}

{% block body %}

<!-- Page Content -->
<div class="container-fluid mt-4 bg-dark text-light">

    <h2 class="mb-4">Car List</h2>

       <!-- Search and Filter -->
       <div class="row mb-4">
        <!-- Search Input -->
        <div class="col-md-4">
            <input type="text" name="search" class="form-control bg-dark text-light" placeholder="Search by Name or Model">
        </div>
        <!-- Brand Filter Dropdown -->
        <div class="col-md-4">
            <select name="brand" class="form-select bg-dark text-light">
                <option value="">All Brands</option>
                <option value="Toyota">Toyota</option>
                <option value="Honda">Honda</option>
                <option value="Ford">Ford</option>
                <option value="BMW">BMW</option>
            </select>
        </div>
        <!-- Search & Filter Button -->
        <div class="col-md-4 d-grid">
            <button type="submit" class="btn btn-primary">Search & Filter</button>
        </div>
    </div>
    
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show my-0" role="alert">
                <strong>{{ message }}</strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}
    <!-- Car Table -->
    <table class="table table-bordered table-striped table-dark">
        <thead>
            <tr>
                <th class="text-center">Id</th>
                <th class="text-center">Name</th>
                <th class="text-center">Brand</th>
                <th class="text-center">Model Year</th>
                <th class="text-center">Price</th>
                <th class="text-center">Fuel Type</th>
                <th class="text-center">Transmission</th>
                <th class="text-center">Color</th>
                <th class="text-center">Mileage</th>
                <th class="text-center" colspan="2">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for car in cars %}
            <tr>
                <td class="text-center">{{ car.id }}</td>
                <td class="text-center">{{ car.name }}</td>
                <td class="text-center">{{ car.brand }}</td>
                <td class="text-center">{{ car.model_year }}</td>
                <td class="text-center">{{ car.price }}</td>
                <td class="text-center">{{ car.fuel_type }}</td>
                <td class="text-center">{{ car.transmission }}</td>
                <td class="text-center">{{ car.color }}</td>
                <td class="text-center">{{ car.mileage }}</td>
                <td class="text-center">
                    <a href="{% url 'update_car' car.id %}" class="btn btn-primary btn-sm">Update</a>
                    &nbsp; &nbsp; &nbsp;
                    <a href="{% url 'delete_car' car.id %}" class="btn btn-danger btn-sm"
                       onclick="return confirm('Are you sure you want to delete this car?');">
                        Delete
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>
{% endblock body %}
